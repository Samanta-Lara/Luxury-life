<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Luxury Life ‚Äî Samanta Lara</title>

  <style>
    :root{
      --negro: #0a0a0a;
      --negro-suave: #1a1a1a;
      --blanco: #ffffff;
      --dorado: #d4af37;
      --dorado-suave: #c5a030;
      --borde: #2d2d2d;
    }

    *{ box-sizing:border-box; }

    body{
      font-family: "Segoe UI", Roboto, sans-serif;
      background: var(--negro);
      color: var(--blanco);
      padding: 20px;
      text-align: center;
    }

    h1{
      color: var(--dorado);
      margin-bottom: 25px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    /* ===========================
       üõçÔ∏è CAT√ÅLOGO
       =========================== */
    #productos{
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .producto{
      background: var(--negro-suave);
      border: 1px solid var(--borde);
      border-radius: 10px;
      padding: 14px;
      text-align: center;
      transition: transform .2s;
    }

    .producto:hover{
      transform: translateY(-4px);
      border-color: var(--dorado);
    }

    .producto img{
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
    }

    .producto h3{ margin: 10px 0 6px; }
    .producto p{ margin: 6px 0; }

    .producto button{
      background: var(--dorado);
      color: var(--negro);
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 6px;
      font-weight: bold;
    }

    /* ===========================
       üßæ CARRITO
       =========================== */
    .carrito{
      margin-top: 40px;
      background: var(--negro-suave);
      border: 1px solid var(--borde);
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 520px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }

    .carrito h2{
      color: var(--dorado);
      margin-bottom: 10px;
    }

    #lista-carrito{
      list-style: none;
      padding: 0;
    }

    #lista-carrito li{
      background: #111;
      border: 1px solid var(--borde);
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      font-size: 14px;
    }

    .controles{
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .controles button{
      background: var(--dorado);
      border: none;
      color: var(--negro);
      padding: 4px 8px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .remove{
      background: #c02626 !important;
      color: white;
    }

    strong.total{
      font-size: 18px;
      display: block;
      margin-top: 12px;
    }

    button.vaciar{
      background: #b91c1c;
      color: white;
      padding: 10px 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 10px;
    }

    button.finalizar{
      background: var(--dorado);
      color: var(--negro);
      padding: 10px 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 10px;
      margin-left: 6px;
      font-weight: bold;
    }

    .pago{
      margin-top: 18px;
      padding-top: 12px;
      border-top: 1px solid var(--borde);
    }

    .pago h3{
      margin: 0 0 8px;
      color: var(--dorado-suave);
    }

    .hint{
      font-size: 12px;
      color: #d1d5db;
      margin-top: 8px;
      opacity: .9;
    }
  </style>
</head>

<body>

  <h1>üçΩÔ∏è Luxury Life ‚Äî Samanta Lara</h1>

  <!-- =============================
       üõçÔ∏è CAT√ÅLOGO
       ============================= -->
  <div id="productos"></div>

  <!-- =============================
       üßæ CARRITO
       ============================= -->
  <div class="carrito">
    <h2>üßæ Carrito de Compras</h2>
    <ul id="lista-carrito"></ul>

    <strong class="total">Total: <span id="total-text">$0.00</span></strong>

    <button class="vaciar" id="btnVaciar">üßº Vaciar Carrito</button>
    <button class="finalizar" id="btnFinalizar">‚úÖ Finalizar Compra</button>

    <div class="pago">
      <h3>üí≥ Pago con PayPal (sandbox)</h3>
      <!-- Solo se muestra si total > 0 -->
      <div id="paypal-button-container" style="display:none; margin-top:10px;"></div>
      <p class="hint">
        ‚ö†Ô∏è Para pruebas: reemplaza <code>client-id=sb</code> por tu Client ID sandbox.
      </p>
    </div>
  </div>

  <!-- SDK de PayPal Sandbox -->
  <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD&components=buttons"></script>

  <script>
  /* =============================
     ‚öôÔ∏è MONEDA
     ============================= */
  const MONEDA = 'USD';
  const LOCALE = 'es-CO';
  const money = new Intl.NumberFormat(LOCALE, { style: 'currency', currency: MONEDA });

  /* =============================
     üì¶ PRODUCTOS
     ============================= */
  const productos = [
    { id: 1, nombre: "Villa", precio: 25.00, imagen: "https://www.insignia.com/wp-content/uploads/2024/05/Insignia-luxury-travel3-1024x683.jpg" },
    { id: 2, nombre: "House Castle", precio: 18.00, imagen: "https://www.palazzoia.com/wp-content/uploads/2024/08/Legacy-CX-05-1.jpg" },
    { id: 3, nombre: "Santorini", precio: 30.00, imagen: "https://cf.bstatic.com/xdata/images/hotel/max1024x768/539914575.jpg?k=5643d932a587d26182308a5c905d5c6b47e359c61c2a59356ff66f34a46ac572&o=" },
    { id: 4, nombre: "Bali", precio: 18.00, imagen: "https://storage.googleapis.com/static.inmoweb.es/clients/1521/property/454882/image/149_11540490393.jpg?v=20181025180008117" },
    { id: 5, nombre: "South afric", precio: 22.00, imagen: "https://www.proinsermant.com/wp-content/webp-express/webp-images/uploads/2021/10/Villa-Cullinan-Proinsermant.jpg.webp" }
  ];

  /* =============================
     üß† ESTADO + LOCALSTORAGE
     ============================= */
  let carrito = new Map();
  const STORAGE_KEY = "carrito_luxury_life";

  function persist(){
    localStorage.setItem(STORAGE_KEY, JSON.stringify([...carrito]));
  }

  function load(){
    const saved = localStorage.getItem(STORAGE_KEY);
    if(saved){
      carrito = new Map(JSON.parse(saved));
    }
  }

  /* =============================
     üõçÔ∏è RENDER DE PRODUCTOS
     ============================= */
  const contenedor = document.getElementById("productos");

  function mostrarProductos(){
    contenedor.innerHTML = "";
    productos.forEach(p=>{
      const card = document.createElement("div");
      card.className = "producto";
      card.innerHTML = `
        <img src="${p.imagen}" alt="${p.nombre}">
        <h3>${p.nombre}</h3>
        <p>Precio: ${money.format(p.precio)}</p>
        <button data-add="${p.id}">Agregar al carrito</button>
      `;
      contenedor.appendChild(card);
    });
  }

  /* =============================
     üßæ CARRITO + PAYPAL
     ============================= */
  const lista = document.getElementById("lista-carrito");
  const totalTexto = document.getElementById("total-text");
  const paypalContainer = document.getElementById("paypal-button-container");

  let paypalRenderedTotal = null;

  function renderPayPal(total){
    if(total <= 0){
      paypalRenderedTotal = null;
      paypalContainer.innerHTML = "";
      paypalContainer.style.display = "none";
      return;
    }

    if(paypalRenderedTotal === total){
      return;
    }

    paypalRenderedTotal = total;
    paypalContainer.innerHTML = "";
    paypalContainer.style.display = "block";

    paypal.Buttons({
      style: { layout: "vertical", color: "gold" },

      createOrder: (data, actions)=>{
        return actions.order.create({
          purchase_units: [{
            amount: {
              value: total.toFixed(2),
              currency_code: MONEDA
            }
          }]
        });
      },

      onApprove: (data, actions)=>{
        return actions.order.capture().then(det=>{
          alert(`¬°Gracias ${det?.payer?.name?.given_name || "cliente"}! Tu pago fue aprobado.`);
          carrito.clear();
          persist();
          pintarCarrito();
        });
      },

      onError: ()=>{
        alert("Error procesando el pago con PayPal. Int√©ntalo nuevamente.");
      }

    }).render("#paypal-button-container");
  }

  function pintarCarrito(){
    lista.innerHTML = "";
    let total = 0;

    carrito.forEach(item=>{
      total += item.precio * item.cantidad;

      const li = document.createElement("li");
      li.innerHTML = `
        <span>${item.nombre} ‚Äî ${money.format(item.precio)} x ${item.cantidad}</span>
        <div class="controles">
          <button data-dec="${item.id}">‚àí</button>
          <button data-inc="${item.id}">+</button>
          <button class="remove" data-del="${item.id}">‚ùå</button>
        </div>
      `;
      lista.appendChild(li);
    });

    totalTexto.textContent = money.format(total);
    renderPayPal(total);
  }

  /* =============================
     üõí L√ìGICA DEL CARRITO
     ============================= */
  function add(id){
    const p = productos.find(x=>x.id === id);
    if(!p) return;

    const item = carrito.get(id);
    if(item){
      item.cantidad++;
    } else {
      carrito.set(id, { ...p, cantidad: 1 });
    }
    persist();
    pintarCarrito();
  }

  function dec(id){
    const item = carrito.get(id);
    if(!item) return;

    item.cantidad--;
    if(item.cantidad <= 0) carrito.delete(id);

    persist();
    pintarCarrito();
  }

  function del(id){
    carrito.delete(id);
    persist();
    pintarCarrito();
  }

  document.addEventListener("click", e=>{
    if(e.target.dataset.add) add(+e.target.dataset.add);
    if(e.target.dataset.inc) add(+e.target.dataset.inc);
    if(e.target.dataset.dec) dec(+e.target.dataset.dec);
    if(e.target.dataset.del) del(+e.target.dataset.del);
  });

  /* =============================
     üßº BOTONES
     ============================= */
  document.getElementById("btnVaciar").onclick = ()=>{
    if(confirm("¬øVaciar el carrito?")){
      carrito.clear();
      persist();
      pintarCarrito();
    }
  };

  document.getElementById("btnFinalizar").onclick = ()=>{
    if(carrito.size === 0){
      alert("Tu carrito est√° vac√≠o.");
      return;
    }
    alert("Compra finalizada (simulado).");
  };

  /* =============================
     üöÄ INICIO
     ============================= */
  (function init(){
    mostrarProductos();
    load();
    pintarCarrito();
  })();
  </script>

</body>
</html>
